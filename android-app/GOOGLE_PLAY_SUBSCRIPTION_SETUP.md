# Google Play 구독 설정 가이드

## 📦 현재 구현 상태

✅ **코드**: Google Play Billing 완전 구현됨  
✅ **제품 ID**: `lotto_pro_monthly`  
✅ **서버 연동**: 구매 검증 API 준비됨

---

## 🎯 Play Console에서 해야 할 일

### 1단계: Google Play Console 접속

1. https://play.google.com/console 접속
2. 앱 선택: **Lotto Research Pro** (com.lottoresearch.pro)

### 2단계: 수익 창출 설정

#### 📍 위치: **수익 창출 → 제품 → 구독**

1. 왼쪽 메뉴에서 **"수익 창출"** 클릭
2. **"제품"** → **"구독"** 탭 선택
3. **"구독 만들기"** 버튼 클릭

### 3단계: 구독 상품 생성

#### 📝 기본 정보

**제품 ID** (중요! 코드와 정확히 일치해야 함):

```
lotto_pro_monthly
```

**이름** (한국어):

```
로또연구소 PRO
```

**설명** (한국어):

```
모든 프리미엄 기능을 무제한으로 이용하세요
```

#### 💰 가격 및 구독 옵션

1. **"기본 요금제 추가"** 클릭
2. 요금제 설정:

   - **청구 기간**: 매월 (1개월)
   - **가격**:
     - 대한민국(KRW): **₩1,000**
     - 미국(USD): **$0.99** (선택사항)
   - **갱신 유형**: 자동 갱신

3. **무료 체험** 설정:

   - "무료 체험 추가" 클릭
   - 체험 기간: **30일** (1개월)
   - 가격: ₩0

4. **저장** 클릭

### 4단계: 구독 혜택 설정

#### 설명 작성:

**짧은 설명** (80자 이내):

```
프리미엄 환경에서 무제한으로 로또 번호 추천을 받으세요
```

**전체 설명** (500자 이내):

```
로또연구소 PRO 구독으로 다음 혜택을 누리세요:

✨ 프리미엄 환경
• 깔끔한 환경에서 앱 사용

🤖 무제한 번호 추천
• 하루 제한 없이 원하는 만큼 추천 받기

📊 고급 분석 기능
• 상세한 통계 및 패턴 분석

💾 무제한 번호 저장
• 관심 번호 무제한 저장 및 관리

---

• 월 ₩1,000 자동 갱신
• 30일 무료 체험 (신규 가입자)
• 언제든지 취소 가능
```

### 5단계: 기타 설정

#### 구독 상태:

1. **활성화** 선택
2. **앱에 표시** 활성화

#### 국가/지역:

- **대한민국**: 필수
- **기타 국가**: 선택사항 (글로벌 출시 시)

---

## 🧪 테스트 방법

### 내부 테스트 설정

1. **Play Console → 테스트 → 라이선스 테스트**
2. **"라이선스 테스터 추가"** 클릭
3. 본인 Gmail 주소 추가
4. **"테스트 트랙 설정"** → 내부 테스트

### 테스트 구매

1. 테스터 계정으로 앱 설치
2. PRO 구독 버튼 클릭
3. 결제 화면에서 **"테스트 구매"** 확인
4. 실제 결제 없이 구독 테스트 가능

---

## ✅ 체크리스트

Play Console 구독 설정:

- [ ] 수익 창출 → 제품 → 구독 페이지 접속
- [ ] 제품 ID: `lotto_pro_monthly` 정확히 입력
- [ ] 이름: "로또연구소 PRO" 입력
- [ ] 가격: ₩1,000/월 설정
- [ ] 청구 기간: 매월 (1개월) 설정
- [ ] 무료 체험: 30일 추가
- [ ] 설명 작성 및 저장
- [ ] 구독 활성화
- [ ] 테스트 계정 추가
- [ ] 테스트 구매 확인

앱 코드:

- [x] Google Play Billing 라이브러리 추가됨
- [x] SubscriptionManager 구현됨
- [x] 제품 ID 설정: `lotto_pro_monthly`
- [x] 구독 플로우 구현됨
- [x] 구매 검증 서버 연동됨

---

## 🔐 중요 사항

### 제품 ID 확인

코드의 제품 ID와 Play Console의 제품 ID가 **정확히 일치**해야 합니다:

```kotlin
// SubscriptionManager.kt
const val SUBSCRIPTION_PRODUCT_ID = "lotto_pro_monthly"
```

Play Console:

```
제품 ID: lotto_pro_monthly
```

### 서버 구매 검증

앱은 구매 후 서버에 검증 요청을 보냅니다:

```
POST https://web-production-43fb4.up.railway.app/api/subscription/verify-purchase
```

서버에서 Google Play Developer API를 사용하여 구매를 검증해야 합니다.

---

## 🚀 출시 후 확인사항

1. **첫 구독자 확인**:

   - Play Console → 수익 창출 → 구독 → 대시보드
   - 활성 구독자 수 확인

2. **구매 검증**:

   - 서버 로그에서 검증 요청 확인
   - 데이터베이스에 구독 정보 저장 확인

3. **갱신 모니터링**:
   - 자동 갱신 성공률 확인
   - 취소율 모니터링

---

## 💡 참고 링크

- [Google Play Billing 문서](https://developer.android.com/google/play/billing)
- [구독 만들기](https://support.google.com/googleplay/android-developer/answer/140504)
- [라이선스 테스트](https://developer.android.com/google/play/billing/test)

---

## 📞 문제 해결

### "구독을 찾을 수 없음" 오류

- 제품 ID가 정확한지 확인
- Play Console에서 구독이 **활성화**되었는지 확인
- 앱 버전이 최신인지 확인

### 테스트 구매가 안 됨

- 라이선스 테스터에 계정이 추가되었는지 확인
- 내부 테스트 트랙에 앱이 업로드되었는지 확인
- 24시간 대기 (설정 반영 시간)

### 구매 후 PRO 상태 안 됨

- 서버 구매 검증 API 확인
- 네트워크 연결 확인
- 앱 재시작

---

**구독 설정 완료 후 내부 테스트로 꼭 확인하세요!** ✅
